# Классы поведения


## `World`


### `CONSTRUCTOR()`
Создаёт пустой игровой мир


### Команды

#### `add_entity()`
добавить новую сущность
- POST: добавлена новая сущность без компонентов

#### `remove_entity(entity: Entity)`
удалить сущность
- PRE: сущность `entity` присутствует в мире
- POST: сущность `entity` и связанные с ней компоненты удалены из мира

#### `add_component(entity: Entity, component: Component)`
добавить компонент к сущности
- PRE: сущность `entity` присутствует в мире
- PRE: у сущности `entity` нет компонента того же типа что и `component`
- POST: к сущности `entity` добавлен компонент `component`

#### `remove_component(entity: Entity, component_type: Type[Component])`
удалить компонент у сущности
- PRE: сущность `entity` присутствует в мире
- PRE: у сущности `entity` есть компонент типа `component_type`
- POST: к сущности `entity` добавлен компонент `component`


### Запросы

#### `is_empty() -> bool`
проверить пуст ли мир

#### `has_entity(entity: Entity) -> bool`
проверить присутствует ли сущность в мире

#### `get_last_entity() -> Entity`
получить последнюю созданную сущность
- PRE: последней командой была `add_entity`

#### `has_component(entity: Entity, component_type: Type[Component]) -> bool`
проверить есть ли у сущности компонент заданного типа
- PRE: сущность `entity` присутствует в мире

#### `get_component(entity: Entity, component_type: Type[Component]) -> component`
получить компонент заданного типа у сущности
- PRE: сущность `entity` присутствует в мире
- PRE: у сущности `entity` есть компонент типа `component_type`

#### `get_entities(with_components: set[Component], no_components: set[Component]) -> EntitySet`
получить подмножество сущностей со всеми компонентами из `with_components`
и без единого компонента из `no_components`


## `EntitySet`
Абстрактный класс. Конструктор не нужен.


### Команды

#### `remove_entity(entity: Entity)`
удалить сущность
- PRE: сущность `entity` присутствует во множестве
- POST: сущность `entity` удалена из множества


### Запросы

#### `is_empty() -> bool`
проверить пусто ли множество

#### `has_entity(entity: Entity) -> bool`
проверить присутствует ли сущность во множестве

#### `get_entity() -> Entity`
получить произвольную сущность из множества
- PRE: множество не пусто


## `ExtendableEntitySet(EntitySet)`

### `CONSTRUCTOR()`
Создаёт пустое множество


### Команды

#### `add_entity(entity: Entity)`
добавить сущность
- PRE: сущность `entity` отсутствует во множестве
- POST: сущность `entity` добавлена во множество


## `GameField`

### `CONSTRUCTOR(width: int, height: int)`
создаёт пустое поле заданного размера


### Команды

#### set(x: int, y: int, entity: Entity)
поместить сущность в заданную ячейку
- PRE: координаты в пределах поля
- PRE: ячейка пуста
- POST: сущность помещена в заданную ячейку

#### set_coming(x: int, y: int, entity: Entity)
поместить сущность входящую в заданную ячейку
- PRE: координаты в пределах поля
- PRE: в ячейку не входит другая сущность
- POST: сущность помещена как входящая в заданную ячейку

#### remove(x: int, y: int)
удалить сущность из заданной ячейки
- PRE: координаты в пределах поля
- PRE: в ячейке есть сущность
- POST: сущность удалена из ячейки

#### remove_coming(x: int, y: int)
удалить входящую сущность из заданной ячейки
- PRE: координаты в пределах поля
- PRE: в ячейке есть входящая сущность
- POST: входящая сущность удалена из ячейки


### Запросы

#### is_occupied(x: int, y: int) -> bool
проверить есть ли сущность в данной ячейке
- PRE: координаты в пределах поля

#### is_coming(x: int, y: int) -> bool
проверить есть ли сущность, входящая в данную ячейку
- PRE: координаты в пределах поля

#### get(x: int, y: int) -> Entity
получить сущность из заданной ячейки
- PRE: координаты в пределах поля
- PRE: в ячейке есть сущность

#### get_coming(x: int, y: int) -> Entity
получить сущность, входящую в заданную ячейку
- PRE: координаты в пределах поля
- PRE: в ячейке есть входящая сущность


## GameLevel

### `CONSTRUCTOR(file_name: str)`
создать уровень из файла
- PRE: файл существует
- PRE: файл содержит корректные данные уровня


### Запросы

#### `get_image() -> Image`
получить изображение уровня

#### `get_width() -> int`
получить ширину игрового поля

#### `get_height() -> int`
получить высоту игрового поля

#### `get_item(x: int, y: int) -> Item`
получить элемент игрового поля (может быть пустым)
- PRE: координаты в пределах поля


## SavedGame

### `CONSTRUCTOR(file_name: str)`
создать сохранение из файла
- PRE: файл существует
- PRE: файл содержит корректные данные сохранения


### Запросы

#### `get_image() -> Image`
получить изображение сохранения

#### `get_width() -> int`
получить ширину игрового поля

#### `get_height() -> int`
получить высоту игрового поля

#### `is_occupied(x: int, y: int) -> bool`
проверить есть ли сущность в заданных координатах
- PRE: координаты в пределах поля

#### `get_components(x: int, y: int) -> set[Component]`
получить компоненты сущности с заданными координатами
- PRE: координаты в пределах поля
- PRE: в заданных координатах есть сущность


## Renderer
Пока смутное представление о том, что здесь будет за интерфейс.
Нужно поработать с другими частями проекта.


### `CONSTRUCTOR()`
создать рендерер


### Команды

#### `draw_image(x: int, y: int, image: Image)`
нарисовать изображение с заданными координатами

#### `draw_text(x: int, y: int, text: Text)`
нарисовать текст с заданными координатами


### Запросы


## Input

### `CONSTRUCTOR()`
создать менеджер ввода


### Команды

#### `remove_action()`
удалить самое старое действие пользователя из списка
- PRE: список действий не пуст


### Запросы

#### `has_actions() -> bool`
проверить есть ли ещё действия пользователя в списке

#### `get_action() -> UserAction`
получить самое старое действие пользователя
- PRE: список действий не пуст
